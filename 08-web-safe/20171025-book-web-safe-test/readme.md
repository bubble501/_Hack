## 背景介绍

本文源于对《Web安全测试》的整理，是一篇读书笔记

本书中的内容并没有涉及到很深入的Web安全的知识，从某个角度来看，完全就是一本比较全面的介绍Web安全的指南。但即便如此，书中也依然有许多有价值的知识点、信息值得掌握，所以本文作为一篇读书笔记对这本书进行一个梳理

每个参与到Web应用开发之中的人都能从本书中找到有价值的内容。负责为组件编写单元测试的开发人员将会欣慰地看到，这些工具能够精确地关注于单个页面、功能或表单。必须测试整个Web应用的QA工程师们将会特别感兴趣于那些能够轻松地成为回归测试套件中一部分的测试用例的自动化和开发

>作者不吐不快：“Web应用是很重要而且正在不断发展的一类软件，但它们并不是唯一的软件类型，考虑到遗留应用、嵌入式设备以及世界上的其他代码，我相信Web应用只占到所有软件的一小部分。因此，当世人将所有对软件安全的注意力全部倾注到Web应用上时，我感到担忧。有大量其他类型的重要软件并不依赖于Web。这就是我自称是软件安全人员而不是Web应用安全人员的原因。”

本书分为3个部分：

* 工具的设置以及我们在开发测试中所用到的一些基本概念
* 讨论出于各种目的而绕过客户端输入验证的各种方法（SQL注入、跨站式脚本、篡改隐藏表单域等等）
* 重点讨论会话，查找会话标识符，分析它们的可预见性，并使用工具来操纵它们

## 整书结构

**基础知识**

首先，我们将帮助你建立测试环境。这一部分将帮助你熟悉在整本书都会用到的基础知识。你需要学习的第一件事是如何设置、安装工具并使之开始工作。接着，你需要理解Web应用的共有特点，我们将利用这些特点来尽量扩展测试的适用范围

第1章，绪论。阐述我们对软件安全测试的见解以及如何将它应用到Web应用。有少量术语和某些重要的测试概念我们在整本书中都会用到

第2章，安装一些免费软件，包括一整套不同的免费工具，你能够下载它们并进行安装。针对每个软件，本章都包含了有关在哪里找到它，如何安装以及使之运转的一些基本操作指示。在之后实际进行安全测试的秘诀中，我们将会用到这些工具

第3章，基本观察。教给你观察Web应用并进入内部测试系统功能的基础知识。你需要这些基础技能才能完成本书稍后更加高级的秘诀

第4章，面向Web的数据编码，介绍了多种数据编码。你需要了解如何按照Web应用所使用的多种方式来编码和解码数据。除了编码和解码，你需要能够辨别编码数据并对它的编码方式有所了解。在进行本书中的某些测试时，你需要将数据解码，进行处理并重新编码

**测试技术**

这部分将教给你一些基本的测试技术。我们将向你演示手动和批量扫描技术。这些章节介绍了一般工具，以及用于完成大量不同任务所需要的特殊工具，你可以用这些任务组建更加复杂的测试

第5章，篡改输入。讨论最重要的基本技术：恶意输入。它是如何进入你的应用的？如何得知浏览器中所发生的事情以及浏览器向Web应用发送的内容？

第6章，自动化批量扫描。介绍了几种批量扫描技术和工具。我们将向你演示如何使用网络爬虫（Spider）程序来遍历你的应用以找出输入点和页面，以及对某些专门的应用实施批量测试的方法

第7章，使用cURL实现特定任务的自动化，向你演示一种用于建立自动化测试的重要工具：cURL。我们介绍了少量简单的提交批量测试的方式，然后逐渐过渡到更加困难的任务，比如在登录之后保持状态和操作cookies，并最终建立起一项复杂的任务：登录到eBay

第8章，使用LibWWWPerl实现自动化，重点讨论Perl及其LibWWWPerl（LWP）库。这不是一本讲述如何进行Perl编程的书。它只是一套特定的技术，你也可以用在Perl和LWP库中来实现有趣的安全测试，包括上传病毒到你的应用、尝试特别长的文件名，以及解析来自你的应用的响应

**高级技术**

最后几章的高级技术建立在本书之前介绍的秘诀的基础上。我们将它们结合使用，使之能够实现更多测试，亦或是地址安全测试，这些都是之前的秘诀中所没有演示的

第9章，查找设计缺陷。讨论你的Web应用中的非故意交互以及如何使用好的安全测试将其揭露出来。本章的秘诀集中在那些只有通过使用我们的测试程序才能实现的测试方法上。这包括可预见的标识符，弱随机性以及可重复事务

第10章，攻击AJAX，向你演示大量顶级Web攻击以及如何利用我们之前教过的技术以系统地、关注于测试的方式来执行这些攻击。注入服务端包含（SSI），滥用LDAP和SQL注入是第10章所讨论的攻击的一小部分

第11章，操纵会话，着眼于AJAX，这是所谓的Web2.0应用中的一项主宰技术。我们将向你演示如何揭开AJAX的面纱，并对其进行手动和自动测试。我们截获客户端的请求来测试服务器的逻辑，反过来，通过操纵服务器的响应来测试客户端代码

第12章，多层面的逻辑，重点讨论会话、会话管理以及你的安全测试如何对它进行攻击。这章给出几项秘诀向你演示如何查找、分析并最终测试会话管理的强度

## 恶意输入修改HTML源码

最常见的Web漏洞涉及到向Web应用提供恶意输入以修改HTML源代码。在测试这些漏洞时，验证测试通过或失败的最简单的方法就是检查源代码是否被恶意更改

当心一切未经更改就写入源代码中的输入，然而许多应用根本就不对输入进行验证

最简单的一种安全测试，就是在源代码中搜索你刚刚提供的输入。然后，试着将可能的危险值作为输入，比如HTML标签或JavaScript，并注意它是否未经修改就直接显示在源代码中。如果时这样的话，那么这就是个警示信号

## 操纵框架

操纵HTML框架（frame）是一种常见的跨站式脚本攻击模式。如果有漏洞，攻击者就有可能创建一个框架来覆盖整个页面，使用攻击者所控制的内容来替换真实的网页内容

虽然有些人会使用命令行工具来获取和解析网页，但攻击者通常会在源代码中查看失败的攻击的影响。攻击者可以通过观察被显式保护的内容来找出绕过保护的方法——而苦读源代码常常是一项有用的练习。例如，如果你的应用会过滤用户输入的引号（可能是为了防止JavaScript或SQL注入），攻击者可能会尝试以以下替代品，看哪些能让它通过筛选程序，进入源代码

* 不对称的引号：`“`、`"`、`”` 
* 重音符号：\`
* HTML条目：`&quot;`
* 转义的符号：`\'`
 
