## Lambda表达式有何用处？如何使用

在Python、C++等语言里都有Lambda表达式，不知道其有何用

查了wiki（http://zh.wikipedia.org/wiki/%CE%9B%E6%BC%94%E7%AE%97），里边的数学理论和编译原理有些看不懂

## lambda

>简单来说，编程中提到的lambda表达式，通常是在需要一个函数，但是又不想费神去命名一个函数的场合下使用，也就是指**匿名函数**

这一用法跟所谓的 λ 演算的关系，有点像原子弹和智能方程的关系，差别其实还是挺大的

不谈形式化的 λ 演算，只说有实际用途的匿名函数。先举一个普通的Python例子：将一个list里的每个元素都平方

```
map( lambda x : x * x, [y for y in range(10)] )
```

这个写法要好过

```
def sq(x):
    return x * x

map( sq, [y for y in range(10)] )
```

因为后者多定义了一个（污染环境的）函数，尤其是如果这个函数只会使用一次的话。而且第一种写法实际上更易读，因为那个映射到列表上的函数 具体是要做什么，非常一目了然

>如果你仔细观察自己的代码，会发现这种场景其实很常见：你在某处就真的只需要一个个能做一件事情的函数而已，连它叫什么名字都无关紧要。Lambda表达式就可以用来做这件事情

进一步讲，匿名函数本质上就是一个函数，它所抽象出来的东西是一组运算。这是什么意思呢？类比

```
a = [1, 2, 3]
```

和

```
f = lambda x : x + 1
```

你会发现，等号右边的东西完全可以脱离左边的东西而存在，等号左边的名字只是右边之实体的标识符。如果你能习惯`[1, 2, 3]`单独存在，那么`lambda x : x + 1`也能单独存在其实也不难理解了，它的意义就是给`[某个数加一]`这个运算本身

现在回头来看map()函数，它可以将一个函数映射到一个可枚举类型上面。沿用上面给出的a和f，可以写：

```
map(f, a)
```

也就是将函数f依次套用在a的每个元素上面，获得结果`[2, 3, 4]`。现在用lambda表达式替换f，就变成：

```
map( lambda x : x + 1, [1, 2, 3])
```

会不会觉得现在很一目了然呢？尤其是类比

```
a = [1, 2, 3]
r = []
for each in a:
    r.append(each + 1)
```

这样的写法时，你会发现自己如果能将`遍历列表，给遇到的每个元素都做某种运算`的过程从一个循环里抽象出来成为一个函数map，然后用lambda表达式将这种运算作为参数传给map的话，考虑事情的思维层级会高出一些来，需要顾及的细节也少了一些

Python之中，类似能用到lambda表达式的高级函数还有reduce、filter等等

很多语言也都有这样的工具（不过这些特性最好不要在Python中用太多，原因详见[http://www.zhihu.com/question/19794855/answer/12987428](http://www.zhihu.com/question/19794855/answer/12987428)的评论部分）

这种能够接受一个函数作为参数的函数叫做`高阶函数`，是来自函数式编程(functional programming)的思想

和其他很多语言相比，Python的lambda限制多多，最严重的当属它只能由一条表达式组成。这个限制主要是为了防止滥用，因为当人们发觉lambda很方便，就比较容易滥用，可是用多了会让程序看起来不那么清晰，毕竟每个人对于抽象层级的忍耐、理解程度都有所不同

## 参考资料

* [Lambda 表达式有何用处？如何使用？](https://www.zhihu.com/question/20125256)