## 说明

select系统调用的用途是：在一段指定时间内，监听用户感兴趣的文件描述符上的可读、可写和异常事件

本次练习先介绍select系统调用的API，然后讨论select判断文件描述符就绪的条件，最后给出它在处理带外数据中的实际应用

## 文件描述符就绪条件

哪些情况下文件描述符可以被认为是可读的、可写的或者出现异常，对于select的使用非常关键

在网络编程中，下列情况socket可读

* socket内核接收缓存区中的字节数大于或等于其低水位标记SO_RCVLOWAT，此时我们可以无阻塞地读socket，并且读操作返回的字节数大于0
* socket通信的对方关闭连接，此时对该socket的读写操作将返回0
* 监听socket上有新的连接请求
* socket上有未处理的错误，此时我们可以使用getsockopt来读取和清除该错误

下列情况socket可写

* socket内核发送缓存区中的可用字节数大于或等于其低水位标记SO_SNDLOWAT。此时我们可以无阻塞地写该socket，并且写操作返回的字节数大于0
* socket的写操作被关闭，对写操作被关闭的socket执行写操作将会触发一个SIGPIPE信号
* socket使用非阻塞connect连接成功或失败(超时)之后
* socket上有未处理的错误，此时我们可以使用getsockopt来读取和清除该错误

网络编程中，select能处理的异常情况只有一种：socket上接收到带外数据

## 练习内容

本次练习的内容就是处理带外数据

socket上接收到普通数据和带外数据都将是select返回，但socket处于不同的就绪状态

* 前者处于可读状态
* 后者处于异常状态

本次练习展示select是如何同时处理二者的
